<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Upload Project - ZackFinance</title>
<link rel="stylesheet" href="style.css"></head>
<body>

<div class="header">
  <div class="brand">ZackFinance</div>
  <div class="nav">
    <a href="index.html">Home</a>
    <a href="projects.html">Projects</a>
    <a href="upload.html">Upload</a>
    <a href="reviews.html">Reviews</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="login.html">Login</a>
  </div>
</div>

<main class="container">
  <div class="card">
    <h2>Upload Project</h2>
    <form id="uploadForm" class="form">
      <label>Title</label>
      <input id="title" required>
      <label>Description</label>
      <textarea id="desc" rows="4" required></textarea>
      <label>Budget (optional)</label>
      <input id="budget">
      <label>Image</label>
      <input id="image" type="file" accept="image/*">
      <div style="margin-top:10px">
        <button class="btn" type="submit">Upload</button>
        <button type="button" onclick="location.href='projects.html'" style="margin-left:8px">View Projects</button>
      </div>
      <p id="msg" class="small"></p>
    </form>
  </div>
</main>
<footer class="footer">ZackFinance â€¢ Bunju B, Dar es Salaam</footer>
<script src="common.js"></script>
<script>
// upload using localStorage; allow anonymous user (optional)
document.getElementById('uploadForm').addEventListener('submit', function(e){
  e.preventDefault();
  const title = document.getElementById('title').value.trim();
  const desc = document.getElementById('desc').value.trim();
  const budget = document.getElementById('budget').value.trim();
  const file = document.getElementById('image').files[0];
  const msg = document.getElementById('msg');
  if(!title || !desc){ msg.textContent='Please fill title and description'; return; }
  const projects = readFromLS('projects') || [];
  const uploadObj = { id: Date.now(), title: title, desc: desc, budget: budget, createdAt: Date.now() };
  if(file){
    const reader = new FileReader();
    reader.onload = function(ev){
      uploadObj.image = ev.target.result;
      projects.push(uploadObj);
      saveToLS('projects', projects);
      msg.textContent = 'Uploaded successfully';
      document.getElementById('uploadForm').reset();
    }
    reader.readAsDataURL(file);
  } else {
    projects.push(uploadObj);
    saveToLS('projects', projects);
    msg.textContent = 'Uploaded successfully (no image)';
    document.getElementById('uploadForm').reset();
  }
});
</script>
</body></html>
